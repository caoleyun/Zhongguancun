{"version":3,"sources":["reducers/reducer.js","actions/actions.js","component/MyImg.js","component/BigImg.js","component/InfoBox.js","component/FilterBoxItem.js","component/FilterBox.js","component/SmallPicNavBox.js","component/Main.js","index.js"],"names":["caltPicAmount","data","amount","pic","forEach","filter","pics","length","fetchData","dispatch","$","get","pn","Number","window","location","hash","substr","result","calcTotalTdx","Object","objectSpread","type","idx","albumindex","filterindex","thepic","picindex","gotofilter","number1","number2","MyImg","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","refs","img","hide","on","show","react_default","a","createElement","className","ref","src","props","React","Component","BigImg","_ref","_this","component_MyImg","id","onClick","connect","state","album","InfoBox","name","FilterBoxItem","item","index","cur","albumidx","map","thefilter","classname","push","href","join","style","backgroundColor","key","FilterBox","self","component_FilterBoxItem","SmallPicNavBox","pages","nowpage","ul_nav","delegate","ul_box","stop","animate","left","addClass","siblings","removeClass","_this2","uls","curi","parseInt","curj","_loop","i","lis","_loop2","j","number","spans","setState","find","eq","Math","ceil","showul","width","shownav","Main","assertThisInitialized","end","totalIdx","component_BigImg","component_InfoBox","component_FilterBox","component_SmallPicNavBox","store","createStore","arguments","undefined","picture-index","action","applyMiddleware","createLogger","thunk","render","es","component_Main","document","getElementById"],"mappings":"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","file":"static/js/main.c8926d71.chunk.js","sourcesContent":["let getInitialState=()=>{\r\n\treturn {\r\n\t\t\"album\":0,   //当前所在相册编号0-2  几个相册\r\n\t\t\"filter\":2,  //在 某一个 相册中的编号\r\n\t\t\"idx\":0,    //当前所在图片的序号。\r\n\t\t\"amount\":0, //总图片张数\r\n\t\t\"data\":{\r\n\t\t\t\"name\":\"\",\r\n\t\t\t\"picture-index\":0,\r\n\t\t\t\"pic\" :[]\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\nlet  caltPicAmount=(data)=>{\r\n\tlet amount=0;\r\n\tdata.pic.forEach(function(pic){\r\n\t\tpic.filter.forEach(function(filter){\r\n\t\t\tamount+=filter.pics.length;\r\n\t\t});\r\n\t});\r\n\treturn amount;\r\n}\r\n\r\n\r\nexport default (state=getInitialState(),action) => {\r\n\r\n\tswitch(action.type){\r\n\t\tcase \"FETCHDATA\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t\"album\":action.albumindex,\r\n\t\t\t\t\"filter\":action.filterindex,\r\n\t\t\t\t\"idx\":action.picindex,\r\n\t\t\t\t\"amount\":caltPicAmount(action.data),\r\n\t\t\t\t\"data\":action.data\r\n\t\t\t}\r\n\t\tcase \"GONEXT\":\r\n\t\t\t// 判定是不是当前filter中的最后一张\r\n\t\t\tif(state.idx==state.data.pic[state.album].filter[state.filter].pics.length-1){\r\n\t\t\t\t//判断是不是album中的最后一张\r\n\t\t\t\tif(state.filter==state.data.pic[state.album].filter.length-1){\r\n\t\t\t\t\t//判断是不是最后一个album\r\n\t\t\t\t\tif(state.album==state.data.pic.length-1){\r\n\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\t\"idx\":0,\r\n\t\t\t\t\t\t\t\"filter\":0,\r\n\t\t\t\t\t\t\t\"album\":0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\"idx\":0,\r\n\t\t\t\t\t\t\"filter\":0,\r\n\t\t\t\t\t\t\"album\":state.album+1\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t\"idx\":0,\r\n\t\t\t\t\t\"filter\":state.filter+1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn{\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t\"idx\":state.idx+1\r\n\t\t\t}\r\n\t\tcase \"GOPREV\":\r\n\t\t\t//判定是不是当前filter中的头\r\n\t\t\tif(state.idx==0){\r\n\t\t\t\t//判断是不是当前album的头\r\n\t\t\t\tif(state.filter==0){\r\n\t\t\t\t\t//判断是不是album的最终头\r\n\t\t\t\t\tif(state.album==0){\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\t\"album\":state.data.pic.length-1,\r\n\t\t\t\t\t\t\t\"filter\":state.data.pic[state.data.pic.length-1].filter.length-1,\r\n\t\t\t\t\t\t\t\"idx\":state.data.pic[state.data.pic.length-1].filter[state.data.pic[state.data.pic.length-1].filter.length-1].pics.length-1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\"filter\":state.data.pic[state.album-1].filter.length-1,\r\n\t\t\t\t\t\t\"album\":state.album-1,\r\n\t\t\t\t\t\t\"idx\":state.data.pic[state.album-1].filter[state.data.pic[state.album-1].filter.length-1].pics.length-1\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t\"filter\":state.filter-1,\r\n\t\t\t\t\t\"idx\":state.data.pic[state.album].filter[state.filter-1].pics.length-1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn{\r\n\t\t\t\t\t\t...state,\r\n\t\t\t\t\t\t\"idx\":state.idx-1\r\n\t\t\t}\r\n\t\tcase \"GOTOIDX\":\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t\"idx\":action.number\r\n\t\t\t}\r\n\t\tcase \"GOTOFILTER\" :\r\n\t\t\t//判断是否是自己\r\n\t\t\tif(state.filter==action.number1&&state.album==action.album){\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...state\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t\"filter\":action.number1,\r\n\t\t\t\t\t\"album\":action.number2,\r\n\t\t\t\t\t\"idx\":0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t}\r\n\r\n\r\n\treturn state;\r\n}\r\n\r\n","import $ from 'jquery/dist/jquery.min.js';\r\n\r\n\r\n\r\n\r\nexport const fetchData = ()=>(dispatch)=>{\r\n\t$.get(\"json.json\",function(data){\r\n\t\tvar pn=Number(window.location.hash.substr(1))?Number(window.location.hash.substr(1)):1;\r\n\t\tlet result=calcTotalTdx(data,pn);\r\n\t\tdispatch({\"type\":\"FETCHDATA\",\"data\":data,...result});\r\n\t});\r\n\t\r\n};\r\n\r\nlet calcTotalTdx=(data,idx)=>{\r\n\t\tlet amount=0;\r\n\t\tvar self=this;\r\n\t\tvar result;\r\n\t\tdata.pic.forEach(function(pic,albumindex){\r\n\t\t\tpic.filter.forEach(function(filter,filterindex){\r\n\t\t\t\tfilter.pics.forEach(function(thepic,picindex){\r\n\t\t\t\t\tamount++;\r\n\t\t\t\t\tif(amount==idx){\r\n\t\t\t\t\t\tresult={\r\n\t\t\t\t\t\t\talbumindex,\r\n\t\t\t\t\t\t\tfilterindex,\r\n\t\t\t\t\t\t\tpicindex\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// amount+=filter.pics.length;\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn result;\r\n}\r\n// export const minus = (index)=>{return {\"type\":\"MINUS\",\"index\":index}};\r\n// 下一张图片\r\nexport const goNext=()=>{return {\"type\":\"GONEXT\"}}\r\n//上一张\r\nexport const goPrev=()=>{return {\"type\":\"GOPREV\"}}\r\n//去某一张\r\nexport const gotoidx=(number)=>{return {\"type\":\"GOTOIDX\",\"number\":number}}\r\n\r\nexport const gotofilter=(number1,number2)=>{return {\"type\":\"GOTOFILTER\",\"number1\":number1,\"number2\":number2}}\r\n","import React from \"react\";\r\nimport $ from 'jquery/dist/jquery.min.js';\r\n\r\n\r\n\r\nclass MyImg  extends React.Component{\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t}\r\n\t\t\r\n\tcomponentWillUpdate(){\r\n\t\t$(this.refs.img).hide();\r\n \t \t$(this.refs.img).on('load',function(){\r\n \t \t\t$(this).show();\r\n \t \t});\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"bbox\">\r\n\t\t\t\t<img ref=\"img\" src={this.props.src}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}    \r\n\t\t\r\n}\r\n\r\nexport default  MyImg;","import React from \"react\";\r\n// import {bindActionCreators} from \"redux\";  //用bindActionCreators将\r\nimport {connect} from \"react-redux\";\r\nimport {goNext,goPrev}  from \"../actions/actions.js\";//统领actions里面的方法dispatch和actions绑定\r\n// import '../static/css/index.css';\r\nimport MyImg from \"./MyImg.js\";\r\n\r\nclass BigImg  extends React.Component{\r\n\tconstructor({idx}){\r\n\t\tsuper();\r\n\t}\r\n\t\t\r\n\r\n\trender(){\r\n\t\tif(!this.props.img){\r\n\t\t\treturn <div></div>\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"big_pic\">\r\n\t\t\t\t<div className=\"inner\">\r\n\t\t\t\t\t<MyImg src={\"images/big/\"+this.props.img} id=\"big_img\" />\r\n\t\t\t\t\t<div className=\"leftBtn\" id=\"leftBtn\" onClick={()=>{this.props.dispatch(goPrev())}}></div>\r\n\t\t\t\t\t<div className=\"rightBtn\" id=\"rightBtn\" onClick={()=>{this.props.dispatch(goNext())}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}    \r\n\t\t\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\tif(state.data.pic.length==0){\r\n\t\t\treturn {\r\n\t\t\t\timg:null,\r\n\t\t\t\tidx:0\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\timg : state.data.pic[state.album].filter[state.filter].pics[state.idx],\r\n\t\t\t\tidx:state.idx\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n)(BigImg);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n// import '../static/css/index.css';\r\n\r\n\r\n\r\nclass InfoBox extends React.Component{\r\n\r\n\tconstructor(name){\r\n\t\tsuper();\r\n\t}\r\n\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"info_box\">\r\n\t\t\t\t<h3>产品相关</h3>\r\n\t\t\t\t<h4>{this.props.name}</h4>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\treturn {\r\n\t\t\tname:state.data.name\r\n\t\t}\r\n\t}\r\n)(InfoBox);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n// import '../static/css/index.css';\r\nimport {gotofilter}  from \"../actions/actions.js\";//统领actions里面的方法dispatch和actions绑定\r\n\r\n\r\n\r\nclass FilterBoxItem extends React.Component{\r\n\r\n\tconstructor({item,album,index,filter,cur,albumidx}){\r\n\t\tsuper();\r\n\r\n\t}\r\n\tshow(){\r\n\t\t// console.log(\"jahha\");\r\n\t\tif(this.props.item[\"filter-name\"]==\"颜色\"){\r\n\t\t\treturn (\r\n\t\t\t\tthis.props.item.filter.map((thefilter,index)=>{\r\n\t\t\t\t\t\tlet classname=[\"color_choose\"];\r\n\t\t\t\t\t\t//判定cur\r\n\t\t\t\t\t\tif(this.props.cur && (index==this.props.filter)){\r\n\t\t\t\t\t\t\tclassname.push(\"cur\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn <a onClick={()=>{this.props.dispatch(gotofilter(index,this.props.albumidx))}} href=\"javascript:void(0)\" className={classname.join(\" \")} style={{\"backgroundColor\":thefilter[\"type-name\"]}} key={index}></a>\r\n\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t}else{\r\n\t\t\treturn (\r\n\t\t\t\tthis.props.item.filter.map((thefilter,index)=>{\r\n\t\t\t\t\t\t\treturn <a onClick={()=>{this.props.dispatch(gotofilter(index,this.props.albumidx))}} href=\"javascript:void(0)\" className={(this.props.cur && (index==this.props.filter))?\"cur\":\" \"} key={index}>{thefilter[\"type-name\"]}</a>\r\n\t\t\t\t\t\t})\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\trender(){\r\n\t\t// console.log(this.props);\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"filter_name\">\r\n\t\t\t\t\t{this.props.item[\"filter-name\"]}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"filter_types\">\r\n\t\t\t\t\t{this.show()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\treturn {\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n)(FilterBoxItem);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n// import '../static/css/index.css';\r\nimport FilterBoxItem from \"./FilterBoxItem.js\";\r\n\r\n\r\n\r\nclass FilterBox extends React.Component{\r\n\r\n\tconstructor({pic,album,filter}){\r\n\t\tsuper();\r\n\t}\r\n\r\n\r\n\r\n\trender(){\r\n\t\tvar self=this;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"filter_box\">\r\n\t\t\t\t<h3>图片筛选</h3>\r\n\t\t\t\t<div className=\"filter\" id=\"filter_box\">\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthis.props.pic.map(function(item,index){\r\n\t\t\t\t\t\t\t\treturn <li key={index}>  <FilterBoxItem filter={self.props.filter} cur={self.props.album==index} item={item} albumidx={index} album={self.props.album} > </FilterBoxItem>  </li>\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\treturn {\r\n\t\t\tpic:state.data.pic,\r\n\t\t\talbum:state.album,\r\n\t\t\tfilter:state.filter\r\n\t\t}\r\n\t}\r\n)(FilterBox);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\n// import '../static/css/index.css';\r\nimport $ from 'jquery/dist/jquery.min.js';\r\nimport {gotoidx}  from \"../actions/actions.js\";//统领actions里面的方法dispatch和actions绑定\r\n\r\n\r\n\r\n\r\n\r\nclass SmallPicNavBox extends React.Component{\r\n\r\n\tconstructor({pics,idx}){\r\n\t\tsuper();\r\n\t\t//总页数\r\n\t\tthis.pages=0;\r\n\t\t//当前所在页数\r\n\t\tthis.state={\r\n\t\t\t\"nowpage\":0\r\n\t\t}\r\n\t\t// this.nowpage=0;\r\n\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\tvar self=this;\r\n\t\t$(this.refs.ul_nav).delegate(\"span\",\"click\",function(){\r\n\t\t\t// self.setState({\"nowpage\":$(this).index()});\r\n\t\t\t// $(self.refs.ul_box).stop(true).animate({\"left\":-263*self.state.nowpage},500);\r\n\t\t\t// self.setState({\"nowpage\":$(this).index()});\r\n\t\t\t$(self.refs.ul_box).stop(true).animate({\"left\":-263*$(this).index()},500);\r\n\t\t\t$(this).addClass(\"cur\").siblings().removeClass(\"cur\");\r\n\t\t});\r\n\t}\r\n\r\n\tshowul(){\r\n\t\tvar pics=this.props.pics;\r\n\t\tvar uls=[];\r\n\t\tvar curi=parseInt(this.props.idx/9);\r\n\t\tvar curj=this.props.idx%9;\r\n\t\tfor(let i=0;i<this.pages;i++){\r\n\t\t\tlet lis=[];\r\n\t\t\tfor(let j=0;j<9 && i*9+j < pics.length; j++){\r\n\t\t\t\tlet imgurl=pics[i*9+j];\r\n\t\t\t\tlet src=\"images/small/\"+imgurl;\r\n\t\t\t\tlis.push(\r\n\t\t\t\t\t<li key={j} className={i==curi && j==curj ? \"cur\" : \" \"} onClick={()=>{this.props.dispatch(gotoidx(i*9+j))}}>\r\n\t\t\t\t\t\t<img src={src} />\r\n\t\t\t\t\t\t<div className=\"mask\"></div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tuls.push(<ul key={i}>{lis}</ul>);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\tuls\r\n\t\t);\r\n\t}\r\n\r\n\tshownav(){\r\n\t\t// 页数\r\n\t\t// this.pages=Math.ceil(this.props.pics.length/9);\r\n\t\tvar spans=[];\r\n\t\tfor(var i=0;i<this.pages;i++){\r\n\t\t\tspans.push(<span key={i} ></span>);\r\n\t\t}\r\n\t\treturn (spans);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(){\r\n\t\tif(this.state.nowpage!=parseInt(this.props.idx/9)){\r\n\t\t\t$(this.refs.ul_box).stop(true).animate({\"left\":-263*parseInt(this.props.idx/9)},500);\r\n\t\t\tthis.setState({\"nowpage\":parseInt(this.props.idx/9)});\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\t\r\n\t\t$(this.refs.ul_nav).find(\"span\").eq(this.state.nowpage).addClass(\"cur\").siblings().removeClass(\"cur\");\r\n\t\t$(this.refs.ul_box).stop(true).animate({\"left\":-263*parseInt(this.props.idx/9)},500);\r\n\r\n\t}\r\n\r\n\trender(){\r\n\t\tthis.pages=Math.ceil(this.props.pics.length/9);\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<div className=\"small_pic_nav_box\">\r\n\t\t\t\t<h3>图片筛选</h3>\r\n\t\t\t\t<div className=\"inner\" id=\"small_pic_nav_box\">\r\n\t\t\t\t\t<div className=\"ul_box\" ref=\"ul_box\">\r\n\t\t\t\t\t\t{this.showul()}\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"ul_nav\"  ref=\"ul_nav\" style={{\"width\" : this.pages*40-10}}>\r\n\t\t\t\t\t{this.shownav()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\tif(state.data.pic.length==0){\r\n\t\t\treturn {\r\n\t\t\t\tpics:[],\r\n\t\t\t\tidx:0\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn {\r\n\t\t\t\tpics : state.data.pic[state.album].filter[state.filter].pics,\r\n\t\t\t\tidx:state.idx\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n)(SmallPicNavBox);","import React from \"react\";\r\n// import {bindActionCreators} from \"redux\";  //用bindActionCreators将\r\nimport {connect} from \"react-redux\";\r\nimport * as actions from \"../actions/actions.js\";//统领actions里面的方法dispatch和actions绑定\r\n// import '../static/css/index.css';\r\n\r\nimport BigImg from \"./BigImg.js\";\r\nimport InfoBox from './InfoBox.js';\r\nimport FilterBox from './FilterBox.js';\r\nimport SmallPicNavBox from './SmallPicNavBox.js';\r\nimport {fetchData} from \"../actions/actions.js\";\r\n\r\n\r\nclass Main  extends React.Component{\r\n\tconstructor({dispatch}){\r\n\t\tsuper();\r\n\t\tdispatch(fetchData());\r\n\t}\r\n\t\t\r\n\tcalcTotalTdx=()=>{\r\n\t\tlet amount=0;\r\n\t\tvar self=this;\r\n\t\tvar end=false;\r\n\t\tthis.props.state.data.pic.forEach(function(pic,albumindex){\r\n\t\t\tpic.filter.forEach(function(filter,filterindex){\r\n\t\t\t\tfilter.pics.forEach(function(thepic,picindex){\r\n\t\t\t\t\tif(albumindex==self.props.state.album&&filterindex==self.props.state.filter&&picindex==self.props.state.idx){\r\n\t\t\t\t\t\tend=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t!end&&amount++;\r\n\t\t\t\t});\r\n\t\t\t\t// amount+=filter.pics.length;\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn amount;\r\n\t}\r\n\r\n\tcomponentDidUpdate(){\r\n\t\tvar totalIdx=this.calcTotalTdx();\r\n\t\twindow.location.hash=totalIdx+1;\r\n\r\n\t\t\r\n\t}\r\n\t\t\t\t\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"appwrap\">\r\n\t\t\t\t<BigImg />\r\n\t\t\t\t<div className=\"number_nav\">\r\n\t\t\t\t\t{this.calcTotalTdx()+1}/{this.props.state.amount}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"right_bar\">\r\n\t\t\t\t\t<InfoBox></InfoBox>\r\n\t\t\t\t\t<FilterBox></FilterBox>\r\n\t\t\t\t\t<SmallPicNavBox></SmallPicNavBox>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}    \r\n\t\t\r\n}\r\n\r\nexport default connect(\r\n\t(state)=>{\r\n\t\treturn{\r\n\t\t\t\"state\":state\r\n\t\t}\r\n\t}\r\n)(Main);","import React from 'react';\nimport {render} from 'react-dom';\nimport {createStore,applyMiddleware} from \"redux\";\nimport {Provider} from \"react-redux\";\nimport reducer from './reducers/reducer.js';\n// import Main from './component/Main.js';\n// import Dd from './component/Dd.js';\n// import './static/css/index.css';\nimport {createLogger} from \"redux-logger\";//控制台的状态输出action\nimport thunk from \"redux-thunk\";\n\n\nimport Main from \"./component/Main.js\";\n\nimport './static/css/index.css';\nimport $ from 'jquery/dist/jquery.min.js';\n// import './static/css/index.css';\n// import 'bootstrap/dist/css/bootstrap.min.css';\n// import PropTypes from 'prop-types';//自己下载插件\n\nlet store = createStore(reducer,applyMiddleware(createLogger(),thunk));\n\nrender(\n\t<Provider store={store}>\n\t\t<Main/>\n\t</Provider>\n,document.getElementById(\"container\"))\n\n"],"sourceRoot":""}