(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(32)},31:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(18),c=a(12),l=a(6),s=a(2),u=function(e){var t=0;return e.pic.forEach(function(e){e.filter.forEach(function(e){t+=e.pics.length})}),t},o=a(20),p=a(21),m=a(3),f=a(4),d=a(8),b=a(5),h=a(7),O=a(9),v=a(1),j=a.n(v),x=function(){return function(e){j.a.get("json.json",function(t){var a=Number(window.location.hash.substr(1))?Number(window.location.hash.substr(1)):1,i=E(t,a);e(Object(s.a)({type:"FETCHDATA",data:t},i))})}},E=function(e,t){var a,i=0;return e.pic.forEach(function(e,n){e.filter.forEach(function(e,r){e.pics.forEach(function(e,c){++i==t&&(a={albumindex:n,filterindex:r,picindex:c})})})}),a},g=function(e,t){return{type:"GOTOFILTER",number1:e,number2:t}},y=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).call(this))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentWillUpdate",value:function(){j()(this.refs.img).hide(),j()(this.refs.img).on("load",function(){j()(this).show()})}},{key:"render",value:function(){return n.a.createElement("div",{className:"bbox"},n.a.createElement("img",{ref:"img",src:this.props.src}))}}]),t}(n.a.Component),k=function(e){function t(e){e.idx;return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).call(this))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return this.props.img?n.a.createElement("div",{className:"big_pic"},n.a.createElement("div",{className:"inner"},n.a.createElement(y,{src:"images/big/"+this.props.img,id:"big_img"}),n.a.createElement("div",{className:"leftBtn",id:"leftBtn",onClick:function(){e.props.dispatch({type:"GOPREV"})}}),n.a.createElement("div",{className:"rightBtn",id:"rightBtn",onClick:function(){e.props.dispatch({type:"GONEXT"})}}))):n.a.createElement("div",null)}}]),t}(n.a.Component),w=Object(l.b)(function(e){return 0==e.data.pic.length?{img:null,idx:0}:{img:e.data.pic[e.album].filter[e.filter].pics[e.idx],idx:e.idx}})(k),N=function(e){function t(e){return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).call(this))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"info_box"},n.a.createElement("h3",null,"\u4ea7\u54c1\u76f8\u5173"),n.a.createElement("h4",null,this.props.name))}}]),t}(n.a.Component),_=Object(l.b)(function(e){return{name:e.data.name}})(N),C=function(e){function t(e){e.item,e.album,e.index,e.filter,e.cur,e.albumidx;return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).call(this))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"show",value:function(){var e=this;return"\u989c\u8272"==this.props.item["filter-name"]?this.props.item.filter.map(function(t,a){var i=["color_choose"];return e.props.cur&&a==e.props.filter&&i.push("cur"),n.a.createElement("a",{onClick:function(){e.props.dispatch(g(a,e.props.albumidx))},href:"javascript:void(0)",className:i.join(" "),style:{backgroundColor:t["type-name"]},key:a})}):this.props.item.filter.map(function(t,a){return n.a.createElement("a",{onClick:function(){e.props.dispatch(g(a,e.props.albumidx))},href:"javascript:void(0)",className:e.props.cur&&a==e.props.filter?"cur":" ",key:a},t["type-name"])})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"filter_name"},this.props.item["filter-name"]),n.a.createElement("div",{className:"filter_types"},this.show()))}}]),t}(n.a.Component),T=Object(l.b)(function(e){return{}})(C),I=function(e){function t(e){e.pic,e.album,e.filter;return Object(m.a)(this,t),Object(d.a)(this,Object(b.a)(t).call(this))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"filter_box"},n.a.createElement("h3",null,"\u56fe\u7247\u7b5b\u9009"),n.a.createElement("div",{className:"filter",id:"filter_box"},n.a.createElement("ul",null,this.props.pic.map(function(t,a){return n.a.createElement("li",{key:a},"  ",n.a.createElement(T,{filter:e.props.filter,cur:e.props.album==a,item:t,albumidx:a,album:e.props.album}," "),"  ")}))))}}]),t}(n.a.Component),G=Object(l.b)(function(e){return{pic:e.data.pic,album:e.album,filter:e.filter}})(I),D=function(e){function t(e){var a;e.pics,e.idx;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this))).pages=0,a.state={nowpage:0},a}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;j()(this.refs.ul_nav).delegate("span","click",function(){j()(e.refs.ul_box).stop(!0).animate({left:-263*j()(this).index()},500),j()(this).addClass("cur").siblings().removeClass("cur")})}},{key:"showul",value:function(){for(var e=this,t=this.props.pics,a=[],i=parseInt(this.props.idx/9),r=this.props.idx%9,c=function(c){for(var l=[],s=function(a){var s="images/small/"+t[9*c+a];l.push(n.a.createElement("li",{key:a,className:c==i&&a==r?"cur":" ",onClick:function(){e.props.dispatch({type:"GOTOIDX",number:9*c+a})}},n.a.createElement("img",{src:s}),n.a.createElement("div",{className:"mask"})))},u=0;u<9&&9*c+u<t.length;u++)s(u);a.push(n.a.createElement("ul",{key:c},l))},l=0;l<this.pages;l++)c(l);return a}},{key:"shownav",value:function(){for(var e=[],t=0;t<this.pages;t++)e.push(n.a.createElement("span",{key:t}));return e}},{key:"componentDidUpdate",value:function(){this.state.nowpage!=parseInt(this.props.idx/9)&&(j()(this.refs.ul_box).stop(!0).animate({left:-263*parseInt(this.props.idx/9)},500),this.setState({nowpage:parseInt(this.props.idx/9)})),j()(this.refs.ul_nav).find("span").eq(this.state.nowpage).addClass("cur").siblings().removeClass("cur"),j()(this.refs.ul_box).stop(!0).animate({left:-263*parseInt(this.props.idx/9)},500)}},{key:"render",value:function(){return this.pages=Math.ceil(this.props.pics.length/9),n.a.createElement("div",{className:"small_pic_nav_box"},n.a.createElement("h3",null,"\u56fe\u7247\u7b5b\u9009"),n.a.createElement("div",{className:"inner",id:"small_pic_nav_box"},n.a.createElement("div",{className:"ul_box",ref:"ul_box"},this.showul())),n.a.createElement("div",{className:"ul_nav",ref:"ul_nav",style:{width:40*this.pages-10}},this.shownav()))}}]),t}(n.a.Component),B=Object(l.b)(function(e){return 0==e.data.pic.length?{pics:[],idx:0}:{pics:e.data.pic[e.album].filter[e.filter].pics,idx:e.idx}})(D),A=function(e){function t(e){var a,i=e.dispatch;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this))).calcTotalTdx=function(){var e=0,t=Object(O.a)(Object(O.a)(a)),i=!1;return a.props.state.data.pic.forEach(function(a,n){a.filter.forEach(function(a,r){a.pics.forEach(function(a,c){n==t.props.state.album&&r==t.props.state.filter&&c==t.props.state.idx&&(i=!0),!i&&e++})})}),e},i(x()),a}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.calcTotalTdx();window.location.hash=e+1}},{key:"render",value:function(){return n.a.createElement("div",{className:"appwrap"},n.a.createElement(w,null),n.a.createElement("div",{className:"number_nav"},this.calcTotalTdx()+1,"/",this.props.state.amount),n.a.createElement("div",{className:"right_bar"},n.a.createElement(_,null),n.a.createElement(G,null),n.a.createElement(B,null)))}}]),t}(n.a.Component),F=Object(l.b)(function(e){return{state:e}})(A),R=(a(31),Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{album:0,filter:2,idx:0,amount:0,data:{name:"","picture-index":0,pic:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCHDATA":return Object(s.a)({},e,{album:t.albumindex,filter:t.filterindex,idx:t.picindex,amount:u(t.data),data:t.data});case"GONEXT":return e.idx==e.data.pic[e.album].filter[e.filter].pics.length-1?e.filter==e.data.pic[e.album].filter.length-1?e.album==e.data.pic.length-1?Object(s.a)({},e,{idx:0,filter:0,album:0}):Object(s.a)({},e,{idx:0,filter:0,album:e.album+1}):Object(s.a)({},e,{idx:0,filter:e.filter+1}):Object(s.a)({},e,{idx:e.idx+1});case"GOPREV":return 0==e.idx?0==e.filter?0==e.album?Object(s.a)({},e,{album:e.data.pic.length-1,filter:e.data.pic[e.data.pic.length-1].filter.length-1,idx:e.data.pic[e.data.pic.length-1].filter[e.data.pic[e.data.pic.length-1].filter.length-1].pics.length-1}):Object(s.a)({},e,{filter:e.data.pic[e.album-1].filter.length-1,album:e.album-1,idx:e.data.pic[e.album-1].filter[e.data.pic[e.album-1].filter.length-1].pics.length-1}):Object(s.a)({},e,{filter:e.filter-1,idx:e.data.pic[e.album].filter[e.filter-1].pics.length-1}):Object(s.a)({},e,{idx:e.idx-1});case"GOTOIDX":return Object(s.a)({},e,{idx:t.number});case"GOTOFILTER":return e.filter==t.number1&&e.album==t.album?Object(s.a)({},e):Object(s.a)({},e,{filter:t.number1,album:t.number2,idx:0})}return e},Object(c.a)(Object(o.createLogger)(),p.a)));Object(r.render)(n.a.createElement(l.a,{store:R},n.a.createElement(F,null)),document.getElementById("container"))}},[[22,1,2]]]);
//# sourceMappingURL=main.c8926d71.chunk.js.map